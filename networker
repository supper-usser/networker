#!/bin/bash

# check if at least one argument is given
if [ $# -eq 0 ]; then
  echo "[i] Usage: networker [-h | -w]"
  echo "[i] In case selecting '-w' option, run entire program two times!"
  echo "[!] exit..."
  exit 1
fi

case "$1" in
  -h)
    echo "[i] [Home] configuration applied..."
    ip addr flush dev eth0
    sleep 1
    # --- Home /etc/network/interfaces ---
    echo "# This file describes the network interfaces available on your system" > /etc/network/interfaces
    echo "# and how to activate them. For more information, see interfaces(5)." >> /etc/network/interfaces
    echo "" >> /etc/network/interfaces
    echo "source /etc/network/interfaces.d/*" >> /etc/network/interfaces
    echo "" >> /etc/network/interfaces
    echo "# The loopback network interface" >> /etc/network/interfaces
    echo "auto lo" >> /etc/network/interfaces
    echo "iface lo inet loopback" >> /etc/network/interfaces
    echo "" >> /etc/network/interfaces
    echo "auto eth0" >> /etc/network/interfaces
    echo "iface eth0 inet dhcp" >> /etc/network/interfaces

    # Restart networking
    systemctl restart networking
    ;;
  -w)
    echo "[i] [Work] configuration applied..."
    ip addr flush dev eth0
    sleep 1
    # --- Work /etc/network/interfaces ---
    echo '# This file describes the network interfaces available on your system' > /etc/network/interfaces
    echo '# and how to activate them. For more information, see interfaces(5).' >> /etc/network/interfaces
    echo '' >> /etc/network/interfaces
    echo 'source /etc/network/interfaces.d/*' >> /etc/network/interfaces
    echo '' >> /etc/network/interfaces
    echo '# The loopback network interface' >> /etc/network/interfaces
    echo 'auto lo' >> /etc/network/interfaces
    echo 'iface lo inet loopback' >> /etc/network/interfaces
    echo '' >> /etc/network/interfaces
    echo 'auto eth0' >> /etc/network/interfaces
    echo 'iface eth0 inet static' >> /etc/network/interfaces
    echo '    address 10.80.163.220' >> /etc/network/interfaces
    echo '    netmask 255.255.255.0' >> /etc/network/interfaces
    echo '    gateway 10.80.163.10' >> /etc/network/interfaces
    echo '    dns-nameservers 8.8.8.8 1.1.1.1' >> /etc/network/interfaces

    # --- Work /etc/resolv.conf ---
    echo '# Generated by dhcpcd' > /etc/resolv.conf
    echo '# /etc/resolv.conf.head can replace this line' >> /etc/resolv.conf
    echo '# /etc/resolv.conf.tail can replace this line' >> /etc/resolv.conf
    echo 'nameserver 1.1.1.1' >> /etc/resolv.conf
    echo 'nameserver 8.8.8.8' >> /etc/resolv.conf

    # Restart networking
    systemctl restart networking
    ;;
  *)
    echo "[i] Usage: networker [-h | -w]"
    echo "[i] In case selecting '-w' option, run entire program two times!"
    echo "[!] exit..."
    exit 1
    ;;
esac


